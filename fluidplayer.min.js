var fluidPlayerScriptLocation=function(){var e,t,i="";return document.currentScript?i=document.currentScript.src:(e=document.getElementsByTagName("script"),i=void 0!==(t=e[e.length-1]).getAttribute.length?t.src:t.getAttribute("src",-1)),i?i.substring(0,i.lastIndexOf("/")+1):""}();fluidPlayer=function(e,t,i){var n=function(e,t){for(var i=t.length,n=0;n<i;n++)if(t[n]==e)return!0;return!1},o=fluidPlayerClass.constructor();for(var a in fluidPlayerClass)fluidPlayerClass.hasOwnProperty(a)&&!n(a,fluidPlayerClass.notCloned)&&(o[a]=fluidPlayerClass[a]);return fluidPlayerClass.instances.push(o),void 0!==t&&"string"!=typeof t&&(i=t,t=null),o.init(e,t,i),o};var fluidPlayerClass={vttParserScript:"webvtt.js",instances:[],notCloned:["notCloned","vttParserScript","instances","getInstanceById","requestStylesheet","reqiestScript","isTouchDevice","vastOptions","displayOptions","getEventOffsetX","getEventOffsetY","getTranslateX","toggleElementText","getMobileOs","findClosestParent","activeVideoPlayerId","getInstanceIdByWrapperId","timer","timerPool","adList","adPool","isUserActive"],version:"1.2.0",homepage:"https://www.fluidplayer.com/",activeVideoPlayerId:null,getInstanceById:function(e){for(var t=0;t<this.instances.length;t++)if(this.instances[t].videoPlayerId===e)return this.instances[t];return null},getInstanceIdByWrapperId:function(e){return void 0!==e?e.replace("fluid_video_wrapper_",""):null},requestStylesheet:function(e,t){if(!document.getElementById(e)){var i=document.getElementsByTagName("head")[0],n=document.createElement("link");n.id=e,n.rel="stylesheet",n.type="text/css",n.href=t,n.media="all",i.appendChild(n)}},requestScript:function(e,t){var i=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.src=e,n.onreadystatechange=t,n.onload=t,i.appendChild(n)},isTouchDevice:function(){return!!("ontouchstart"in window||navigator.maxTouchPoints)},getMobileOs:function(){var e,t=navigator.userAgent,i={device:!1,userOs:!1,userOsVer:!1,userOsMajor:!1};if(t.match(/iPad/i)?(i.device="iPad",i.userOs="iOS",e=t.indexOf("OS ")):t.match(/iPhone/i)?(i.device="iPhone",i.userOs="iOS",e=t.indexOf("OS ")):t.match(/Android/i)?(i.userOs="Android",e=t.indexOf("Android ")):i.userOs=!1,"iOS"===i.userOs&&e>-1){var n=t.substr(e+3);-1!==n.indexOf(" ")&&(i.userOsVer=n.substring(0,n.indexOf(" ")).replace(/_/g,"."),i.userOsMajor=parseInt(i.userOsVer))}else"Android"===i.userOs&&e>-1?i.userOsVer=t.substr(e+8,3):i.userOsVer=!1;return i},getCurrentVideoDuration:function(){var e=document.getElementById(this.videoPlayerId);return e?e.duration:0},getClickThroughUrlFromLinear:function(e){var t=e.getElementsByTagName("VideoClicks");if(t.length){var i=t[0].getElementsByTagName("ClickThrough");if(i.length)return i[0].childNodes[0].nodeValue}return!1},getClickThroughUrlFromNonLinear:function(e){var t="";if(e.getElementsByTagName("NonLinear").length){var i=e.getElementsByTagName("NonLinearClickThrough");i.length&&(t=i[0].childNodes[0].nodeValue)}return t},getTrackingFromLinear:function(e){var t=e.getElementsByTagName("TrackingEvents");return t.length?t[0].getElementsByTagName("Tracking"):[]},getDurationFromLinear:function(e){var t=e.getElementsByTagName("Duration");return!(!t.length||void 0===t[0].childNodes[0])&&this.convertTimeStringToSeconds(t[0].childNodes[0].nodeValue)},getDurationFromNonLinear:function(e){var t=0,i=e.getElementsByTagName("NonLinear");return i.length&&void 0!==i[0].getAttribute("minSuggestedDuration")&&(t=this.convertTimeStringToSeconds(i[0].getAttribute("minSuggestedDuration"))),t},getDimensionFromNonLinear:function(e){var t={width:null,height:null},i=e.getElementsByTagName("NonLinear");return i.length&&(void 0!==i[0].getAttribute("width")&&(t.width=i[0].getAttribute("width")),void 0!==i[0].getAttribute("height")&&(t.height=i[0].getAttribute("height"))),t},getCreativeTypeFromStaticResources:function(e){var t="",i=e.getElementsByTagName("NonLinear");return i.length&&void 0!==i[0].childNodes[0]&&(t=i[0].getElementsByTagName("StaticResource")[0].getAttribute("creativeType")),t.toLowerCase()},getMediaFilesFromLinear:function(e){var t=e.getElementsByTagName("MediaFiles");return t.length?t[0].getElementsByTagName("MediaFile"):[]},getStaticResourcesFromNonLinear:function(e){var t=[],i=e.getElementsByTagName("NonLinear");return i.length&&(t=i[0].getElementsByTagName("StaticResource")),t},getMediaFileFromLinear:function(e){for(var t,i=this.getMediaFilesFromLinear(e),n=0;n<i.length;n++)if(i[n].getAttribute("type")||(t=i[n].childNodes[0].nodeValue),i[n].getAttribute("type")===this.displayOptions.mediaType)return i[n].childNodes[0].nodeValue;return t},getStaticResourceFromNonLinear:function(e){for(var t,i=this.getStaticResourcesFromNonLinear(e),n=0;n<i.length;n++)if(i[n].getAttribute("type")||(t=i[n].childNodes[0].nodeValue),i[n].getAttribute("type")===this.displayOptions.staticResource)return i[n].childNodes[0].nodeValue;return t},registerTrackingEvents:function(e,t){trackingEvents=this.getTrackingFromLinear(e);for(var i="",n=0,o=0;o<trackingEvents.length;o++)switch(i=trackingEvents[o].getAttribute("event")){case"start":case"firstQuartile":case"midpoint":case"thirdQuartile":case"complete":void 0===t.tracking[i]&&(t.tracking[i]=[]),void 0===t.stopTracking[i]&&(t.stopTracking[i]=[]),t.tracking[i].push(trackingEvents[o].childNodes[0].nodeValue),t.stopTracking[i]=!1;break;case"progress":void 0===t.tracking[i]&&(t.tracking[i]=[]),n=this.convertTimeStringToSeconds(trackingEvents[o].getAttribute("offset")),void 0===t.tracking[i][n]&&(t.tracking[i][n]={elements:[],stopTracking:!1}),t.tracking[i][n].elements.push(trackingEvents[o].childNodes[0].nodeValue)}},registerImpressionEvents:function(e,t){if(e.length){t.impression=[];for(var i=0;i<e.length;i++)t.impression.push(e[i].childNodes[0].nodeValue)}},registerErrorEvents:function(e,t){null!=e&&1===e.length&&1===e[0].childNodes.length&&(t.errorUrl=e[0].childNodes[0].nodeValue)},announceError:function(e){if(void 0!==this.vastOptions.errorUrl&&this.vastOptions.errorUrl){e=void 0!==e?parseInt(e):900;var t=this.vastOptions.errorUrl.replace("[ERRORCODE]",e);this.callUris([t])}},announceLocalError:function(e){e=void 0!==e?parseInt(e):900,console.log("[Error] ("+e+"): Failed to load Vast")},getClickTrackingEvents:function(e){var t=[],i=e.getElementsByTagName("VideoClicks");if(i.length){var n=i[0].getElementsByTagName("ClickTracking");if(n.length)for(var o=0;o<n.length;o++)t.push(n[o].childNodes[0].nodeValue)}return t},getNonLinearClickTrackingEvents:function(e){var t="";if(e.getElementsByTagName("NonLinear").length){var i=e.getElementsByTagName("NonLinearClickTracking");i.length&&(t=i[0].childNodes[0].nodeValue)}return t},callUris:function(e){for(var t=0;t<e.length;t++)(new Image).src=e[t]},recalculateAdDimensions:function(e){e||void 0===this.videoPlayerId||(e=this.videoPlayerId);var t=document.getElementById(e),i=document.getElementById("vast_clickthrough_layer_"+e);i&&(i.style.width=t.offsetWidth+"px",i.style.height=t.offsetHeight+"px");var n=this.checkFullscreenSupport("fluid_video_wrapper_"+e),o=document.getElementById(e+"_fluid_control_fullscreen"),a=document.getElementById(e+"context_option_fullscreen");n?null===document[n.isFullscreen]?this.fullscreenOff(o,a):this.fullscreenOn(o,a):-1!==fullscreenTag.className.search(/\bpseudo_fullscreen\b/g)?(fullscreenTag.className+=" pseudo_fullscreen",this.fullscreenOn(o,a)):(fullscreenTag.className=fullscreenTag.className.replace(/\bpseudo_fullscreen\b/g,""),this.fullscreenOff(o,a)),this.recalcPosition()},prepareVast:function(e){var t=this,i=document.getElementById(this.videoPlayerId),n=[];n.length=0,n=t.findRoll(e);for(var o=0;o<n.length;o++){var a=n[o];!0!==t.adList[a].vastLoaded&&!0!==t.adList[a].error&&(t.parseVastTag(t.adList[a].vastTag,a),i.addEventListener("adId_"+a,t[e]))}},toggleLoader:function(e){if("browser"!==this.displayOptions.layout){var t=document.getElementById("vast_video_loading_"+this.videoPlayerId);t.style.display=e?"table":"none"}},sendRequest:function(e,t,i,n){var o=new XMLHttpRequest;o.onreadystatechange=n,o.open("GET",e,!0),o.withCredentials=t,o.timeout=i,o.send()},playMainVideoWhenVastFails:function(e){var t=this,i=document.getElementById(t.videoPlayerId);i.removeEventListener("loadedmetadata",t.switchPlayerToVastMode),i.pause(),t.toggleLoader(!1),t.displayOptions.noVastVideoCallback(),t.vastOptions&&void 0!==this.vastOptions.errorUrl?t.announceError(e):t.announceLocalError(e),t.switchToMainVideo()},switchPlayerToVastMode:function(){},parseVastTag:function(e,t){var i=this,n={vastTagUrl:e,tracking:[],stopTracking:[],vastLoaded:!1};i.sendRequest(e,!0,i.displayOptions.vastTimeout,function(){var o=this;if(4===o.readyState&&200!==o.status)return i.adList[t].error=!0,void i.playMainVideoWhenVastFails(900);if(4===o.readyState&&200===o.status){var a=o.responseXML,r=a.getElementsByTagName("Impression");null!==r&&i.registerImpressionEvents(r,n);var l=a.getElementsByTagName("Error");null!==l&&i.registerErrorEvents(l,n),n.skipoffset=!1,n.adFinished=!1,n.vastTagUrl=e;var s=a.getElementsByTagName("Creative");if(void 0!==s&&s.length){var d=s[0].getElementsByTagName("Linear");if(null!=d&&d.length){var c=d[0];n.adType="linear",n.skipoffset=i.convertTimeStringToSeconds(c.getAttribute("skipoffset")),n.clickthroughUrl=i.getClickThroughUrlFromLinear(c),n.clicktracking=i.getClickTrackingEvents(c),n.duration=i.getDurationFromLinear(c),n.mediaFile=i.getMediaFileFromLinear(c),i.registerTrackingEvents(c,n)}var u=s[0].getElementsByTagName("NonLinearAds");if(null!=u&&u.length){var v=u[0];n.adType="nonLinear",n.clickthroughUrl=i.getClickThroughUrlFromNonLinear(v),n.clicktracking=i.getNonLinearClickTrackingEvents(v),n.duration=i.getDurationFromNonLinear(v),n.dimension=i.getDimensionFromNonLinear(v),n.staticResource=i.getStaticResourceFromNonLinear(v),n.creativeType=i.getCreativeTypeFromStaticResources(v),i.registerTrackingEvents(v,n)}if(i.adList[t].adType=n.adType?n.adType:"unknown",void 0!==n.mediaFile||void 0!==n.staticResource){i.adList[t].vastLoaded=!0,i.displayOptions.vastLoadedCallback(),i.adPool[t]=Object.assign({},n);var m=document.createEvent("Event");return m.initEvent("adId_"+t,!1,!0),void document.getElementById(i.videoPlayerId).dispatchEvent(m)}return i.adList[t].error=!0,void i.playMainVideoWhenVastFails(101)}return i.adList[t].error=!0,void i.playMainVideoWhenVastFails(101)}})},playRoll:function(e){var t=this,i=document.getElementById(t.videoPlayerId);if(t.adPool.hasOwnProperty(e)){var n=t.adPool[e].roll;switch(t.vastOptions=t.adPool[e],n){case"midRoll":i.mainVideoCurrentTime=i.currentTime-1;break;case"postRoll":i.mainVideoCurrentTime=0,t.autoplayAfterAd=!1,i.autoplayAfterAd=!1,i.currentTime=t.mainVideoDuration}var o=function(){if(t.adFinished)i.removeEventListener("timeupdate",o);else{var e=Math.floor(i.currentTime);t.scheduleTrackingEvent(e,t.vastOptions.duration),e>=t.vastOptions.duration-1&&(i.removeEventListener("timeupdate",o),t.adFinished=!0)}};t.switchPlayerToVastMode=function(){if(t.vastOptions.duration||(t.vastOptions.duration=i.duration),t.addClickthroughLayer(t.videoPlayerId),!1!==t.vastOptions.skipoffset&&t.addSkipButton(),t.addCTAButton(),i.removeAttribute("controls"),"browser"!==t.displayOptions.layout){var n=document.getElementById(t.videoPlayerId+"_fluid_controls_progress_container");null!==n&&(n.className=n.className.replace(/\bfluid_slider\b/g,"fluid_ad_slider"))}t.displayOptions.adText&&t.addAdPlayingText(t.displayOptions.adText),t.toggleLoader(!1),t.adList[e].played=!0,t.adFinished=!1,i.play(),t.trackSingleEvent("impression"),i.removeEventListener("loadedmetadata",t.switchPlayerToVastMode)},i.pause(),i.addEventListener("loadedmetadata",t.switchPlayerToVastMode),t.mainVideoCurrentTime=i.currentTime,i.src=t.vastOptions.mediaFile,t.isCurrentlyPlayingAd=!0,i.load(),i.addEventListener("ended",t.onVastAdEnded),i.addEventListener("timeupdate",o)}else t.announceLocalError(101)},scheduleTrackingEvent:function(e,t){var i=this;0==e&&i.trackSingleEvent("start"),void 0!==i.vastOptions.tracking.progress&&i.vastOptions.tracking.progress.length&&void 0!==i.vastOptions.tracking.progress[e]&&i.trackSingleEvent("progress",e),e==Math.floor(t/4)&&i.trackSingleEvent("firstQuartile"),e==Math.floor(t/2)&&i.trackSingleEvent("midpoint"),e==Math.floor(3*t/4)&&i.trackSingleEvent("thirdQuartile"),e>=t-1&&i.trackSingleEvent("complete")},trackSingleEvent:function(e,t){var i=this,n=[];switch(n.length=0,e){case"start":case"firstQuartile":case"midpoint":case"thirdQuartile":case"complete":!1===i.vastOptions.stopTracking[e]&&(null!==i.vastOptions.tracking[e]&&(n=i.vastOptions.tracking[e]),i.vastOptions.stopTracking[e]=!0);break;case"progress":i.vastOptions.tracking.progress[t].elements.forEach(function(e,o){!1===i.vastOptions.tracking.progress[t].stopTracking&&i.vastOptions.tracking.progress[t].elements.length&&(n=i.vastOptions.tracking.progress[t].elements),i.vastOptions.tracking.progress[t].stopTracking=!0});break;case"impression":void 0!==i.vastOptions.impression&&null!==i.vastOptions.impression&&"unknown"!=typeof i.vastOptions.impression.length&&(n=i.vastOptions.impression)}i.callUris(n)},completeNonLinearStatic:function(e){var t=this;t.closeNonLinear(),0==t.adFinished&&(t.adFinished=!0,t.trackSingleEvent("complete")),clearInterval(t.nonLinearTracking)},createNonLinearStatic:function(e){var t=this,i=document.getElementById(t.videoPlayerId);t.adPool.hasOwnProperty(e)&&!0!==t.adPool[e].error?(t.vastOptions=t.adPool[e],t.createBoard(e),t.adFinished=!1,t.trackSingleEvent("start"),duration=t.vastOptions.duration?t.vastOptions.duration:t.nonLinearDuration,t.nonLinearTracking=setInterval(function(){if(!0!==t.adFinished){var e=Math.floor(i.currentTime);t.scheduleTrackingEvent(e,duration),e>=duration-1&&(t.adFinished=!0)}},400),"midRoll"==t.adList[e].roll&&void 0!==t.adList[e].timer?offset="midRoll"==t.adPool[e].roll?t.adList[e].timer:0:offset=0,time=parseInt(t.getCurrentTime())+parseInt(duration)+parseInt(offset),t.scheduleTask({time:time,closeStaticAd:e})):t.announceLocalError(101)},createBoard:function(e){var t=this;if(void 0!==t.vastOptions.staticResource&&-1!==t.supportedStaticTypes.indexOf(t.vastOptions.creativeType)){t.adList[e].played=!0;var i=document.getElementById(t.videoPlayerId),n=i.clientWidth,o=(i.clientHeight,Math.floor((n-468)/2)),a=50,r=document.createElement("div"),l=new Image;l.src=t.vastOptions.staticResource,l.id="nonLinear_imgCreative_"+e+"_"+t.videoPlayerId,l.onload=function(){origWidth=null!==t.vastOptions.dimension.width?t.vastOptions.dimension.width:l.width,origHeight=null!==t.vastOptions.dimension.height?t.vastOptions.dimension.height:l.height,origWidth>n?(newBannerWidth=n-5,newBannerHeight=origHeight*newBannerWidth/origWidth):(newBannerWidth=origWidth,newBannerHeight=origHeight),img=document.getElementById(l.id),img.width=newBannerWidth,img.height=newBannerHeight,o=Math.floor((n-newBannerWidth)/2),a=50,r.style.bottom=a+"px",r.style.left=o+"px",r.style.width=newBannerWidth+"px",r.style.height=newBannerHeight+"px",r.style.display="block"},r.id="nonLinear_"+t.videoPlayerId,r.className="fluid_nonLinear_container",r.innerHTML=l.outerHTML,r.style.bottom=a+"px",r.style.left=o+"px",r.style.width="468px",r.style.height="60px",r.style.display="none",r.onclick=function(){void 0!==t.vastOptions.clickthroughUrl&&window.open(t.vastOptions.clickthroughUrl),void 0!==t.vastOptions.clicktracking&&t.callUris([t.vastOptions.clicktracking])},void 0!==t.vastOptions.clickthroughUrl&&(r.style.cursor="pointer");var s=document.createElement("div");s.id="close_button_"+t.videoPlayerId,s.className="close_button",s.innerHTML="",s.title=t.displayOptions.closeButtonCaption,s.onclick=function(e){return this.parentElement.remove(t),void 0!==e.stopImmediatePropagation&&e.stopImmediatePropagation(),t.adFinished=!0,clearInterval(t.nonLinearTracking),!1},r.appendChild(s),i.parentNode.insertBefore(r,i.nextSibling)}else t.adList[e].error=!0},recalcPosition:function(){var e=document.getElementById("fluid_video_wrapper_"+this.videoPlayerId),t=document.getElementById("nonLinear_"+this.videoPlayerId);if(t&&e){var i=document.getElementById(this.videoPlayerId).clientWidth,n=t.style.width.replace("px",""),o=Math.floor((i-n)/2);t.style.bottom="50px",t.style.left=o+"px"}},closeNonLinear:function(){var e=document.getElementById("nonLinear_"+this.videoPlayerId);e&&e.remove()},preRoll:function(e){var t=fluidPlayerClass.getInstanceById(this.id),i=document.getElementById(this.getAttribute("id"));i.removeEventListener(e.type,t.preRoll),t.initialStart=!0,adListId=e.type.replace("adId_",""),!0!==t.adList[adListId].played&&("linear"==t.adList[adListId].adType&&(t.toggleLoader(!0),t.playRoll(adListId)),"nonLinear"==t.adList[adListId].adType&&(i.play(),t.createNonLinearStatic(adListId)))},midRoll:function(e){var t=fluidPlayerClass.getInstanceById(this.id);if(document.getElementById(this.getAttribute("id")).removeEventListener(e.type,t.midRoll),adListId=e.type.replace("adId_",""),!0!==t.adList[adListId].played){var i=t.adList[adListId].timer;"string"==typeof i&&-1!==i.indexOf("%")&&(i=i.replace("%",""),i=Math.floor(t.mainVideoDuration/100*i)),t.scheduleTask({time:i,playRoll:"midRoll",adListId:adListId})}},postRoll:function(e){var t=fluidPlayerClass.getInstanceById(this.id);document.getElementById(this.getAttribute("id")).removeEventListener(e.type,t.postRoll),adListId=e.type.replace("adId_",""),t.scheduleTask({time:Math.floor(t.mainVideoDuration),playRoll:"postRoll",adListId:adListId})},adTimer:function(){var e=this;1!=e.isTimer&&(e.isTimer=!e.isTimer,e.timer=setInterval(function(){for(var t in e.timerPool){if(time=Math.floor(e.getCurrentTime()),time!=t)break;if(e.timerPool[t]&&e.timerPool[t].hasOwnProperty("playRoll")){var i=e.timerPool[t].adListId;0==e.adList[i].played&&(e.vastOptions=e.adPool[i],"linear"==e.vastOptions.adType&&(e.toggleLoader(!0),e.playRoll(i)),"nonLinear"==e.vastOptions.adType&&e.createNonLinearStatic(i),delete e.timerPool[t])}if(e.timerPool[t]&&e.timerPool[t].hasOwnProperty("closeStaticAd")){var n=e.timerPool[t].closeStaticAd;1==e.adList[n].played&&(e.completeNonLinearStatic(n),delete e.timerPool[t])}}},800))},scheduleTask:function(e){this.timerPool[e.time]=e},switchToMainVideo:function(){var e=this,t=document.getElementById(e.videoPlayerId);if(t.src=e.originalSrc,t.load(),void 0!==t.mainVideoCurrentTime?t.currentTime=t.mainVideoCurrentTime:t.currentTime=0,t.play(),0==e.autoplayAfterAd&&t.pause(),e.isCurrentlyPlayingAd=!1,e.removeClickthrough(),e.removeSkipButton(),e.removeAdPlayingText(),e.removeCTAButton(),e.adFinished=!0,e.displayOptions.vastVideoEndedCallback(),e.vastOptions=null,"browser"!==e.displayOptions.layout){var i=document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container");null!==i&&(i.className=i.className.replace(/\bfluid_ad_slider\b/g,"fluid_slider"))}t.removeEventListener("ended",e.onVastAdEnded),t.addEventListener("ended",e.onMainVideoEnded),"browser"===e.displayOptions.layout&&t.setAttribute("controls","controls")},onVastAdEnded:function(){fluidPlayerClass.getInstanceById(this.id).switchToMainVideo(),fluidPlayerClass.getInstanceById(this.id).vastOptions=null,fluidPlayerClass.getInstanceById(this.id).adFinished=!0},onMainVideoEnded:function(){var e=fluidPlayerClass.getInstanceById(this.id);Math.floor(e.getCurrentTime())>=Math.floor(e.mainVideoDuration)&&clearInterval(e.timer)},getCurrentTime:function(){return this.isCurrentlyPlayingAd?this.mainVideoCurrentTime:document.getElementById(this.videoPlayerId).currentTime},addSkipButton:function(){var e=document.getElementById(this.videoPlayerId),t=document.createElement("div");t.id="skip_button_"+this.videoPlayerId,t.className="skip_button skip_button_disabled",t.innerHTML=this.displayOptions.skipButtonCaption.replace("[seconds]",this.vastOptions.skipoffset),document.getElementById("fluid_video_wrapper_"+this.videoPlayerId).appendChild(t),e.addEventListener("timeupdate",this.decreaseSkipOffset,!1)},addAdPlayingText:function(){var e=this.displayOptions.adText,t=document.createElement("div");t.id=this.videoPlayerId+"_fluid_ad_playing",t.className="fluid_ad_playing",t.innerText=e,document.getElementById("fluid_video_wrapper_"+this.videoPlayerId).appendChild(t)},removeAdPlayingText:function(){var e=document.getElementById(this.videoPlayerId+"_fluid_ad_playing");e&&e.parentElement.removeChild(e)},addCTAButton:function(){if(this.displayOptions.adCTAText){var e=document.getElementById(this.videoPlayerId),t=document.createElement("div");t.id=this.videoPlayerId+"_fluid_cta",t.className="fluid_ad_cta";var i=document.createElement("a");i.href=this.vastOptions.clickthroughUrl,i.target="_blank",i.innerText=this.displayOptions.adCTAText,i.onclick=function(){return e.paused||e.pause(),!0},t.appendChild(i),document.getElementById("fluid_video_wrapper_"+this.videoPlayerId).appendChild(t)}},removeCTAButton:function(){var e=document.getElementById(this.videoPlayerId+"_fluid_cta");e&&e.parentElement.removeChild(e)},decreaseSkipOffset:function(){var e=this,t=fluidPlayerClass.getInstanceById(e.id),i=t.vastOptions.skipoffset-Math.floor(e.currentTime),n=document.getElementById("skip_button_"+t.videoPlayerId);n?i>=1?n.innerHTML=t.displayOptions.skipButtonCaption.replace("[seconds]",i):(n.innerHTML='<a href="javascript:;" id="skipHref_'+t.videoPlayerId+'" onclick="fluidPlayerClass.getInstanceById(\''+t.videoPlayerId+"').pressSkipButton();\">"+t.displayOptions.skipButtonClickCaption+"</a>",n.className=n.className.replace(/\bskip_button_disabled\b/,""),e.removeEventListener("timeupdate",t.decreaseSkipOffset)):(i=0,e.removeEventListener("timeupdate",e.decreaseSkipOffset))},pressSkipButton:function(){this.removeSkipButton(),this.removeAdPlayingText(),this.removeCTAButton(),this.displayOptions.vastVideoSkippedCallback();var e=document.createEvent("Event");e.initEvent("ended",!1,!0),document.getElementById(this.videoPlayerId).dispatchEvent(e)},removeSkipButton:function(){btn=document.getElementById("skip_button_"+this.videoPlayerId),btn&&btn.parentElement.removeChild(btn)},addClickthroughLayer:function(){var e=this,t=document.getElementById(e.videoPlayerId),i=document.getElementById("fluid_video_wrapper_"+e.videoPlayerId),n=document.createElement("div");n.className="vast_clickthrough_layer",n.id="vast_clickthrough_layer_"+e.videoPlayerId,n.setAttribute("style","position: absolute; cursor: pointer; top: 0; left: 0; width: "+t.offsetWidth+"px; height: "+t.offsetHeight+"px;"),i.appendChild(n);var o=function(){window.open(e.vastOptions.clickthroughUrl),void 0!==e.vastOptions.clicktracking&&e.callUris(e.vastOptions.clicktracking)},a=document.getElementById("vast_clickthrough_layer_"+e.videoPlayerId),r=fluidPlayerClass.getMobileOs(),l="iPhone"===r.device&&!1!==r.userOsMajor&&r.userOsMajor<=9;a.onclick=function(){t.paused?l&&!e.suppressClickthrough?(o(),e.suppressClickthrough=!0):t.play():o()}},removeClickthrough:function(){var e=document.getElementById("vast_clickthrough_layer_"+this.videoPlayerId);e&&e.parentNode.removeChild(e)},getCurrentSrc:function(){var e=document.getElementById(this.videoPlayerId).getElementsByTagName("source");return e.length?e[0].getAttribute("src"):null},convertTimeStringToSeconds:function(e){if(e&&e.match(/^(\d){2}(:[0-5][0-9]){2}(.(\d){1,3})?$/)){var t=e.split(":");return 3600*parseInt(t[0],10)+60*parseInt(t[1],10)+parseInt(t[2],10)}return!1},onRecentWaiting:function(){var e=fluidPlayerClass.getInstanceById(this.id);e.recentWaiting=!0,setTimeout(function(){e.recentWaiting=!1},1e3)},onFluidPlayerPause:function(){var e=this;setTimeout(function(){if(!fluidPlayerClass.getInstanceById(e.id).recentWaiting){var t=document.createEvent("CustomEvent");t.initEvent("fluidplayerpause",!1,!0),e.dispatchEvent(t)}},100)},checkShouldDisplayVolumeControls:function(){return"iOS"!==fluidPlayerClass.getMobileOs().userOs},generateCustomControlTags:function(){return'<div class="fluid_controls_left">   <div id="'+this.videoPlayerId+'_fluid_control_playpause" class="fluid_button fluid_button_play"></div></div><div id="'+this.videoPlayerId+'_fluid_controls_progress_container" class="fluid_controls_progress_container fluid_slider">   <div class="fluid_controls_progress">      <div id="'+this.videoPlayerId+'_vast_control_currentprogress" class="fluid_controls_currentprogress">          <div id="'+this.videoPlayerId+'_vast_control_currentpos" class="fluid_controls_currentpos"></div>      </div>   </div></div><div class="fluid_controls_right">   <div id="'+this.videoPlayerId+'_fluid_control_fullscreen" class="fluid_button fluid_button_fullscreen"></div>   <div id="'+this.videoPlayerId+'_fluid_control_video_source" class="fluid_button_video_source"></div>   <div id="'+this.videoPlayerId+'_fluid_control_volume_container" class="fluid_control_volume_container fluid_slider">       <div id="'+this.videoPlayerId+'_fluid_control_volume" class="fluid_control_volume">           <div id="'+this.videoPlayerId+'_fluid_control_currentvolume" class="fluid_control_currentvolume">               <div id="'+this.videoPlayerId+'_fluid_control_volume_currentpos" class="fluid_control_volume_currentpos"></div>           </div>       </div>   </div>   <div id="'+this.videoPlayerId+'_fluid_control_mute" class="fluid_button fluid_button_volume"></div>   <div id="'+this.videoPlayerId+'_fluid_control_duration" class="fluid_fluid_control_duration">00:00 / 00:00</div></div>'},controlPlayPauseToggle:function(e,t){var i=document.getElementById(e+"_fluid_control_playpause"),n=document.getElementById(e+"context_option_play");t?(i.className=i.className.replace(/\bfluid_button_play\b/g,"fluid_button_pause"),null!==n&&(n.innerHTML="Pause")):(i.className=i.className.replace(/\bfluid_button_pause\b/g,"fluid_button_play"),null!==n&&(n.innerHTML="Play"))},contolProgressbarUpdate:function(e){var t=fluidPlayerClass.getInstanceById(e),i=document.getElementById(e);document.getElementById(e+"_vast_control_currentprogress").style.width=i.currentTime/t.currentVideoDuration*100+"%"},contolDurationUpdate:function(e){var t=fluidPlayerClass.getInstanceById(e);if(t.isCurrentlyPlayingAd)var i="00:00 / 00:00";else{var n=document.getElementById(e);i=t.pad(parseInt(n.currentTime/60))+":"+t.pad(parseInt(n.currentTime%60))+" / "+t.pad(parseInt(t.currentVideoDuration/60))+":"+t.pad(parseInt(t.currentVideoDuration%60))}document.getElementById(e+"_fluid_control_duration").innerHTML=i},pad:function(e){return e<10?"0"+e:e},contolVolumebarUpdate:function(e){var t=fluidPlayerClass.getInstanceById(e);if("browser"!==t.displayOptions.layout){var i=document.getElementById(e),n=document.getElementById(e+"_fluid_control_currentvolume"),o=document.getElementById(e+"_fluid_control_volume_currentpos"),a=document.getElementById(e+"_fluid_control_volume").clientWidth,r=o.clientWidth,l=document.getElementById(e+"_fluid_control_mute"),s=document.getElementById(e+"context_option_mute");i.volume&&(t.latestVolume=i.volume),i.volume?(l.className=l.className.replace(/\bfluid_button_mute\b/g,"fluid_button_volume"),null!==s&&(s.innerHTML="Mute")):(l.className=l.className.replace(/\bfluid_button_volume\b/g,"fluid_button_mute"),null!==s&&(s.innerHTML="Unmute")),n.style.width=i.volume*a+"px",o.style.left=i.volume*a-r/2+"px"}},muteToggle:function(e){var t=fluidPlayerClass.getInstanceById(e),i=document.getElementById(e);i.volume?i.volume=0:i.volume=t.latestVolume},checkFullscreenSupport:function(e){var t=document.getElementById(e);return t.mozRequestFullScreen?{goFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",isFullscreen:"mozFullScreenElement"}:t.webkitRequestFullscreen?{goFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",isFullscreen:"webkitFullscreenElement"}:t.msRequestFullscreen?{goFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",isFullscreen:"msFullscreenElement"}:!!t.requestFullscreen&&{goFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",isFullscreen:"fullscreenElement"}},fullscreenOff:function(e,t){e.className=e.className.replace(/\bfluid_button_fullscreen_exit\b/g,"fluid_button_fullscreen"),null!==t&&(t.innerHTML="Fullscreen")},fullscreenOn:function(e,t){e.className=e.className.replace(/\bfluid_button_fullscreen\b/g,"fluid_button_fullscreen_exit"),null!==t&&(t.innerHTML="Exit Fullscreen")},fullscreenToggle:function(e){fluidPlayerClass.activeVideoPlayerId=e;var t=document.getElementById("fluid_video_wrapper_"+e),i=this.checkFullscreenSupport("fluid_video_wrapper_"+e),n=document.getElementById(e+"_fluid_control_fullscreen"),o=document.getElementById(e+"context_option_fullscreen");if(i){var a="";null===document[i.isFullscreen]?(a="videoPlayerTag."+i.goFullscreen+"();",this.fullscreenOn(n,o)):(a="document."+i.exitFullscreen+"();",this.fullscreenOff(n,o)),new Function("videoPlayerTag",a)(t)}else-1!==t.className.search(/\bpseudo_fullscreen\b/g)?(t.className=t.className.replace(/\bpseudo_fullscreen\b/g,""),this.fullscreenOff(n,o)):(t.className+=" pseudo_fullscreen",this.fullscreenOn(n,o));this.recalculateAdDimensions(),this.recalcPosition()},findClosestParent:function(e,t){var i,n;if(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(e){return"function"==typeof document.body[e]&&(i=e,!0)}),e[i](t))return e;for(;e;){if((n=e.parentElement)&&n[i](t))return n;e=n}return null},getTranslateX:function(e){var t=null;try{var i=e.style.transform.match(/translate3d\((-?\d+px,\s?){2}-?\d+px\)/);i&&i.length&&(t=i[0].replace("translate3d(","").replace(")","").replace(/\s/g,"").replace(/px/g,"").split(","))}catch(e){t=null}return t&&3===t.length?parseInt(t[0]):0},getEventOffsetX:function(e,t){for(var i=0,n=0;t&&!isNaN(t.offsetLeft);)n=fluidPlayerClass.getTranslateX(t),"BODY"===t.tagName?i+=t.offsetLeft+t.clientLeft+n-(t.scrollLeft||document.documentElement.scrollLeft):i+=t.offsetLeft+t.clientLeft+n-t.scrollLeft,t=t.offsetParent;return(void 0!==e.touches&&void 0!==e.touches[0]?e.touches[0].clientX:e.clientX)-i},getEventOffsetY:function(e,t){var i=1,n=fluidPlayerClass.findClosestParent(t,'div[id^="fluid_video_wrapper_"]');if(n){var o=n.id.replace("fluid_video_wrapper_",""),a=fluidPlayerClass.checkFullscreenSupport("fluid_video_wrapper_"+o);a&&document[a.isFullscreen]&&(i=0)}for(var r=0;t&&!isNaN(t.offsetTop);)"BODY"===t.tagName?r+=t.offsetTop-(t.scrollTop||document.documentElement.scrollTop)*i:r+=t.offsetTop-t.scrollTop*i,t=t.offsetParent;return e.clientY-r},onProgressbarMouseDown:function(e){var t=fluidPlayerClass.getInstanceById(e);if(!t.isCurrentlyPlayingAd){var i=document.getElementById(e),n=i.paused;n||i.pause(),document.addEventListener("mouseup",r),document.addEventListener("touchend",r),document.addEventListener("mousemove",a),document.addEventListener("touchmove",a)}function o(e,n){var o=document.getElementById(e+"_fluid_controls_progress_container").clientWidth;o&&(i.currentTime=t.currentVideoDuration*n/o)}function a(i){var n=fluidPlayerClass.getEventOffsetX(i,document.getElementById(e+"_fluid_controls_progress_container"));o(e,n),t.contolProgressbarUpdate(t.videoPlayerId),t.contolDurationUpdate(t.videoPlayerId)}function r(t){document.removeEventListener("mousemove",a),document.removeEventListener("touchmove",a),document.removeEventListener("mouseup",r),document.removeEventListener("touchend",r);var l=fluidPlayerClass.getEventOffsetX(t,document.getElementById(e+"_fluid_controls_progress_container"));isNaN(l)||o(e,l),n||i.play()}},onVolumebarMouseDown:function(e){function t(e,t){var i=document.getElementById(e),n=document.getElementById(e+"_fluid_control_volume_container").clientWidth;if(n){var o=t/n;o<.05?o=0:o>.95&&(o=1),i.volume=o}}function i(i){var n=fluidPlayerClass.getEventOffsetX(i,document.getElementById(e+"_fluid_control_volume_container"));t(e,n)}function n(o){document.removeEventListener("mousemove",i),document.removeEventListener("touchmove",i),document.removeEventListener("mouseup",n),document.removeEventListener("touchend",n);var a=fluidPlayerClass.getEventOffsetX(o,document.getElementById(e+"_fluid_control_volume_container"));isNaN(a)||t(e,a)}document.addEventListener("mouseup",n),document.addEventListener("touchend",n),document.addEventListener("mousemove",i),document.addEventListener("touchmove",i)},setVastList:function(e){var t=this,i={},n={id:null,roll:null,played:!1,vastLoaded:!1,error:!1},o=0,a=function(e){var t=!1;switch(e.roll){case"midRoll":void 0===e.timer&&(t=!0)}return t};void 0!==e&&"string"==typeof e&&(i["ID"+o]=Object.assign({},n),i["ID"+o].roll="preRoll",i["ID"+o].vastTag=e,o++);var r,l;if(t.displayOptions.hasOwnProperty("adList"))for(var s in t.displayOptions.adList)adItem=t.displayOptions.adList[s],r=adItem,l=void 0,l=!1,r.vastTag&&r.roll&&-1!==t.availableRolls.indexOf(r.roll)||(l=!0),l?t.announceLocalError(102,"Wrong adList parameters."):(i["ID"+o]=Object.assign({},n),i["ID"+o]=Object.assign(i["ID"+o],t.displayOptions.adList[s]),"midRoll"==adItem.roll&&(i["ID"+o].error=a("midRoll",adItem)),o++);t.adList=i},findRoll:function(e){if(ids=[],ids.length=0,e&&this.hasOwnProperty("adList")){for(var t in this.adList)this.adList[t].roll==e&&ids.push(t);return ids}},volumeChange:function(e,t){var i=document.getElementById(e),n=i.volume;"asc"==t?n+=.05:"desc"==t&&(n-=.05),n<.05?n=0:n>.95&&(n=1),i.volume=n},currentTimeChange:function(e,t){var i=fluidPlayerClass.getInstanceById(e);if(!i.isCurrentlyPlayingAd){var n=document.getElementById(e);n.currentTime=i.getNewCurrentTimeValueByKeyCode(t,n.currentTime,n.duration)}},getNewCurrentTimeValueByKeyCode:function(e,t,i){var n=t;switch(e){case 37:n=(n-=5)<5?0:n;break;case 39:n=(n+=5)>i-5?i:n;break;case 35:n=i;break;case 36:n=0;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:if(e<58&&e>47)n=i*(10*(e-48))/100}return n},handleMouseenter:function(){var e=fluidPlayerClass.getInstanceIdByWrapperId(this.getAttribute("id")),t=fluidPlayerClass.getInstanceById(e),i=document.getElementById(e);t.captureKey||(t.captureKey=function(n){n.stopPropagation();var o=n.keyCode;switch(o){case 70:t.fullscreenToggle(e),n.preventDefault();break;case 13:case 32:t.playPauseToggle(i),n.preventDefault();break;case 77:t.muteToggle(e),n.preventDefault();break;case 38:t.volumeChange(e,"asc"),n.preventDefault();break;case 40:t.volumeChange(e,"desc"),n.preventDefault();break;case 37:case 39:case 35:case 36:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:t.currentTimeChange(e,o),n.preventDefault()}return!1},document.addEventListener("keydown",t.captureKey,!0))},handleMouseleave:function(){var e=this;window.addEventListener("click",function(t){var i=fluidPlayerClass.getInstanceIdByWrapperId(e.getAttribute("id")),n=fluidPlayerClass.getInstanceById(i);document.getElementById("fluid_video_wrapper_"+i).contains(t.target)||t.target.id=="skipHref_"+i||(document.removeEventListener("keydown",n.captureKey,!0),delete n.captureKey)})},keyboardControl:function(){var e=document.getElementById("fluid_video_wrapper_"+this.videoPlayerId);e.addEventListener("click",this.handleMouseenter,!1),e.addEventListener("mouseleave",this.handleMouseleave,!1)},initialPlay:function(){var e=fluidPlayerClass.getInstanceById(this.id);e.initialStart||(e.playPauseToggle(this),this.removeEventListener("play",e.initialPlay))},playPauseToggle:function(e){var t=fluidPlayerClass.getInstanceById(e.id),i=!1;if(preRolls=t.findRoll("preRoll"),t.initialStart||0==preRolls.length)t.initialStart||preRolls.length>0||(t.initialStart=!0,i=!0,t.displayOptions.noVastVideoCallback()),"browser"!==t.displayOptions.layout&&(e.paused?e.play():i||e.pause()),t.initHtmlOnPauseBlock();else{var n=window.navigator.userAgent,o=fluidPlayerClass.getMobileOs();!1===o.userOs&&!1===o.device||!(window.chrome||-1!==n.indexOf("crios")||0===window.navigator.vendor.indexOf("Google")&&-1!==n.indexOf("chrome"))||(e.src=fluidPlayerScriptLocation+"blank.mp4",e.play()),t.initialStart=!0,t.prepareVast("preRoll")}t.prepareVast("postRoll"),t.prepareVast("midRoll"),t.adTimer();var a=document.getElementById(t.videoPlayerId+"_fluid_html_on_pause");a&&!t.isCurrentlyPlayingAd&&(e.paused?a.style.display="flex":a.style.display="none")},setCustomControls:function(){var e=this,t=document.getElementById(this.videoPlayerId);document.getElementById(this.videoPlayerId+"_fluid_control_playpause").addEventListener("click",function(){e.initialStart||t.removeEventListener("play",e.initialPlay),e.playPauseToggle(t)},!1),document.getElementById(e.videoPlayerId).addEventListener("play",function(){e.controlPlayPauseToggle(e.videoPlayerId,!0),e.contolVolumebarUpdate(e.videoPlayerId)},!1),document.getElementById(e.videoPlayerId).addEventListener("fluidplayerpause",function(){e.controlPlayPauseToggle(e.videoPlayerId,!1)},!1),t.addEventListener("timeupdate",function(){e.contolProgressbarUpdate(e.videoPlayerId),e.contolDurationUpdate(e.videoPlayerId)}),document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container").addEventListener("mousedown",function(t){e.onProgressbarMouseDown(e.videoPlayerId)},!1),document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container").addEventListener("touchstart",function(t){e.onProgressbarMouseDown(e.videoPlayerId)},!1),document.getElementById(e.videoPlayerId+"_fluid_control_volume_container").addEventListener("mousedown",function(t){e.onVolumebarMouseDown(e.videoPlayerId)},!1),document.getElementById(e.videoPlayerId+"_fluid_control_volume_container").addEventListener("touchstart",function(t){e.onVolumebarMouseDown(e.videoPlayerId)},!1),t.addEventListener("volumechange",function(){e.contolVolumebarUpdate(e.videoPlayerId)}),document.getElementById(e.videoPlayerId+"_fluid_control_mute").addEventListener("click",function(){e.muteToggle(e.videoPlayerId)}),document.getElementById(e.videoPlayerId+"_fluid_control_fullscreen").addEventListener("click",function(){e.fullscreenToggle(e.videoPlayerId)})},setCustomContextMenu:function(){var e=this,t=document.getElementById(e.videoPlayerId),i=document.createElement("div");i.id=e.videoPlayerId+"_fluid_context_menu",i.className="fluid_context_menu",i.style.display="none",i.style.position="absolute",i.innerHTML='<ul>    <li id="'+e.videoPlayerId+'context_option_play">Play</li>    <li id="'+e.videoPlayerId+'context_option_mute">Mute</li>    <li id="'+e.videoPlayerId+'context_option_fullscreen">Fullscreen</li>    <li id="'+e.videoPlayerId+'context_option_homepage">       <a            id="'+e.videoPlayerId+'context_option_homepage_link"            href="'+e.homepage+'"            target="_blank">           Fluidplayer '+e.version+"       </a>     </li></ul>",t.parentNode.insertBefore(i,t.nextSibling),t.addEventListener("contextmenu",function(e){e.preventDefault(),i.style.left=fluidPlayerClass.getEventOffsetX(e,t)+"px",i.style.top=fluidPlayerClass.getEventOffsetY(e,t)+"px",i.style.display="block"},!1),document.addEventListener("click",function(e){e.target===t&&2===e.button||(i.style.display="none")},!1);var n=document.getElementById(e.videoPlayerId+"context_option_play"),o=document.getElementById(e.videoPlayerId+"context_option_mute"),a=document.getElementById(e.videoPlayerId+"context_option_fullscreen"),r=document.getElementById(e.videoPlayerId+"context_option_homepage_link");n.addEventListener("click",function(){e.playPauseToggle(t)},!1),o.addEventListener("click",function(){e.muteToggle(e.videoPlayerId)},!1),a.addEventListener("click",function(){e.fullscreenToggle(e.videoPlayerId)},!1),r.style.color="inherit",r.style.textDecoration="inherit"},setDefaultLayout:function(){var e=this,t=document.getElementById(e.videoPlayerId);document.getElementById("fluid_video_wrapper_"+e.videoPlayerId).className+=" fluid_player_layout_"+e.displayOptions.layout,fluidPlayerClass.requestStylesheet("controls_stylesheet_"+e.videoPlayerId,e.displayOptions.templateLocation+e.displayOptions.layout+"/styles.css"),t.removeAttribute("controls"),e.setCustomContextMenu();var i="";e.checkShouldDisplayVolumeControls()||(i=" no_volume_controls");var n=document.createElement("div");n.id=e.videoPlayerId+"_fluid_controls_container",n.className="fluid_controls_container"+i,n.innerHTML=e.generateCustomControlTags(),t.parentNode.insertBefore(n,t.nextSibling);var o=document.createElement("div");o.className="vast_video_loading",o.id="vast_video_loading_"+e.videoPlayerId,o.style.display="none",t.parentNode.insertBefore(o,t.nextSibling);var a=100;if(e.checkShouldDisplayVolumeControls())var r=setInterval(function(){a?e.checkIfVolumebarIsRendered()?(clearInterval(r),e.contolVolumebarUpdate(e.videoPlayerId)):a--:clearInterval(r)},100);e.setCustomControls(),e.setupThumbnailPreview()},checkIfVolumebarIsRendered:function(){var e=document.getElementById(this.videoPlayerId+"_fluid_control_volume_currentpos"),t=document.getElementById(this.videoPlayerId+"_fluid_control_volume").clientWidth;return e.clientWidth!==t},forceLayoutIfNeeded:function(){var e=window.navigator.userAgent;e.match(/iPhone/i)&&e.match(/WebKit/i)&&!e.match(/CriOS/i)&&(this.displayOptions.layout="browser")},setLayout:function(){var e=this,t=document.getElementById(e.videoPlayerId);switch(e.forceLayoutIfNeeded(),t.addEventListener("play",e.initialPlay,!1),document.getElementById(this.videoPlayerId).addEventListener("click",function(){e.playPauseToggle(t)},!1),this.displayOptions.layout){case"browser":break;default:this.setDefaultLayout()}},handleFullscreen:function(){var e=this;void 0===document.vastFullsreenChangeEventListenersAdded&&(["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"].forEach(function(t){"object"==typeof document["on"+t]&&document.addEventListener(t,function(t){e.recalculateAdDimensions(fluidPlayerClass.activeVideoPlayerId)},!1)}),document.vastFullsreenChangeEventListenersAdded=!0)},setupThumbnailPreviewVtt:function(){var e=this;e.sendRequest(e.displayOptions.timelinePreview.file,!0,e.displayOptions.vastTimeout,function(){var t=this;if((4!==t.readyState||200===t.status)&&4===t.readyState&&200===t.status){var i=t.responseText,n=(new WebVTTParser).parse(i);e.timelinePreviewData=function(t){if(void 0===t.cues||!t.cues.length)return[];for(var i=[],n=null,o=null,a=0;a<t.cues.length;a++)2===(n=t.cues[a].text.split("#")).length&&0===n[1].indexOf("xywh=")&&4===(o=(o=n[1].substring(5)).split(",")).length&&i.push({startTime:t.cues[a].startTime,endTime:t.cues[a].endTime,image:e.displayOptions.timelinePreview.sprite?e.displayOptions.timelinePreview.sprite:n[0],x:parseInt(o[0]),y:parseInt(o[1]),w:parseInt(o[2]),h:parseInt(o[3])});return i}(n)}})},generateTimelinePreviewTags:function(){var e=document.getElementById(this.videoPlayerId+"_fluid_controls_progress_container"),t=document.createElement("div");t.id=this.videoPlayerId+"_fluid_timeline_preview_container",t.className="fluid_timeline_preview_container",t.style.display="none",t.style.position="absolute",e.appendChild(t)},getThumbnailCoordinates:function(e){var t=this;if(t.timelinePreviewData.length)for(var i=0;i<t.timelinePreviewData.length;i++)if(e>=t.timelinePreviewData[i].startTime&&e<=t.timelinePreviewData[i].endTime)return t.timelinePreviewData[i];return!1},drawTimelinePreview:function(e){var t=this,i=document.getElementById(t.videoPlayerId+"_fluid_timeline_preview_container"),n=document.getElementById(t.videoPlayerId+"_fluid_controls_progress_container"),o=n.clientWidth;if(t.isCurrentlyPlayingAd)"none"!==i.style.display&&(i.style.display="none");else{var a=fluidPlayerClass.getEventOffsetX(e,n),r=null;if(o){r=t.currentVideoDuration*a/o;var l=t.getThumbnailCoordinates(r);!1!==l?(i.style.width=l.w+"px",i.style.height=l.h+"px",i.style.background="url("+l.image+") no-repeat scroll -"+l.x+"px -"+l.y+"px",i.style.left=a-l.w/2+"px",i.style.display="block"):i.style.display="none"}}},setupThumbnailPreview:function(){var e=this;if(e.displayOptions.timelinePreview&&"string"==typeof e.displayOptions.timelinePreview.file&&"string"==typeof e.displayOptions.timelinePreview.type)switch(e.displayOptions.timelinePreview.type){case"VTT":fluidPlayerClass.requestScript(e.displayOptions.scriptsLocation+fluidPlayerClass.vttParserScript,e.setupThumbnailPreviewVtt.bind(this)),document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container").addEventListener("mousemove",e.drawTimelinePreview.bind(e),!1),document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container").addEventListener("mouseout",function(){document.getElementById(e.videoPlayerId+"_fluid_timeline_preview_container").style.display="none"},!1),e.generateTimelinePreviewTags()}},setupPlayerWrapper:function(){var e=document.getElementById(this.videoPlayerId),t=document.createElement("div");t.className=fluidPlayerClass.isTouchDevice()?"fluid_video_wrapper mobile":"fluid_video_wrapper",t.id="fluid_video_wrapper_"+this.videoPlayerId,this.displayOptions.responsive?t.style.width="100%":(t.style.height=e.clientHeight+"px",t.style.width=e.clientWidth+"px"),e.style.height="100%",e.style.width="100%",e.parentNode.insertBefore(t,e),t.appendChild(e)},onErrorDetection:function(){var e=fluidPlayerClass.getInstanceById(this.id);this.networkState===this.NETWORK_NO_SOURCE&&e.isCurrentlyPlayingAd&&e.playMainVideoWhenVastFails(401)},createVideoSourceSwitch:function(){var e=this,t=document.getElementById(e.videoPlayerId);if("browser"!==e.displayOptions.layout){var i=[],n=t.querySelectorAll("source");if([].forEach.call(n,function(e){e.title&&e.src&&i.push({title:e.title,url:e.src})}),e.videoSources=i,e.videoSources.length>1){var o=document.getElementById(e.videoPlayerId+"_fluid_control_video_source"),a=document.createElement("div");a.id=e.videoPlayerId+"_fluid_control_video_source_title",a.className="fluid_video_sources_title",a.innerText=e.videoSources[0].title,o.appendChild(a);var r=document.createElement("div");r.id=e.videoPlayerId+"_fluid_control_video_source_list",r.className="fluid_video_sources_list",r.style.display="none",e.videoSources.forEach(function(t){var i=document.createElement("div");i.className="fluid_video_source_list_item",i.innerText=t.title,i.addEventListener("click",function(t){t.stopPropagation();var i=this;e.videoSources.forEach(function(t){t.title==i.innerText&&(a.innerText=t.title,e.setVideoSource(t.url))}),e.openCloseVideoSourceSwitch()}),r.appendChild(i)}),o.appendChild(r),o.addEventListener("click",function(){e.openCloseVideoSourceSwitch()})}}},openCloseVideoSourceSwitch:function(){var e=document.getElementById(this.videoPlayerId+"_fluid_control_video_source_list"),t=document.getElementById(this.videoPlayerId+"_fluid_control_video_source");if(this.isCurrentlyPlayingAd)e.style.display="none";else if("none"==e.style.display){e.style.display="block";var i=function(n){t.removeEventListener("mouseleave",i),e.style.display="none"};t.addEventListener("mouseleave",i)}else e.style.display="none"},setVideoSource:function(e){var t=this,i=document.getElementById(t.videoPlayerId);if(t.isCurrentlyPlayingAd)t.originalSrc=e;else{var n=!1;if(!i.paused){t.playPauseToggle(i);n=!0}var o=i.currentTime,a=function(){i.removeEventListener("loadedmetadata",a),i.currentTime=o,n&&t.playPauseToggle(i)};i.addEventListener("loadedmetadata",a),i.src=e,t.originalSrc=e}},initLogo:function(){var e=this,t=document.getElementById(e.videoPlayerId);if(e.displayOptions.logo){var i=document.createElement("img");i.src=e.displayOptions.logo,i.style.position="absolute";var n=e.displayOptions.logoPosition.toLowerCase();-1!==n.indexOf("bottom")?i.style.bottom=0:i.style.top=0,-1!==n.indexOf("right")?i.style.right=0:i.style.left=0,e.displayOptions.logoOpacity&&(i.style.opacity=e.displayOptions.logoOpacity),null!==e.displayOptions.logoUrl?(i.style.cursor="pointer",i.addEventListener("click",function(){window.open(e.displayOptions.logoUrl,"_blank").focus()})):i.style.pointerEvents="none",t.parentNode.insertBefore(i,null)}},initHtmlOnPauseBlock:function(){var e=this;if(e.displayOptions.htmlOnPauseBlock){var t=document.getElementById(e.videoPlayerId),i=document.createElement("div");i.id=e.videoPlayerId+"_fluid_html_on_pause",i.className="fluid_html_on_pause",i.style.display="none",i.innerHTML=e.displayOptions.htmlOnPauseBlock,i.onclick=function(i){e.playPauseToggle(t)},e.displayOptions.htmlOnPauseBlockWidth&&(i.style.width=e.displayOptions.htmlOnPauseBlockWidth+"px"),e.displayOptions.htmlOnPauseBlockHeight&&(i.style.height=e.displayOptions.htmlOnPauseBlockHeight+"px"),t.parentNode.insertBefore(i,null)}},mainVideoReady:function(){var e=fluidPlayerClass.getInstanceById(this.id);0==e.mainVideoDuration&&(e.mainVideoDuration=this.duration)},userActivityChecker:function(){var e=this,t=document.getElementById("fluid_video_wrapper_"+e.videoPlayerId);e.newActivity=null;activityCheck=setInterval(function(){if(!0===e.newActivity){e.newActivity=!1;var t=document.getElementById(e.videoPlayerId);if(!1===e.isUserActive){t=document.getElementById(e.videoPlayerId);var i=new CustomEvent("userActive");t.dispatchEvent(i),e.isUserActive=!0}clearTimeout(e.inactivityTimeout),e.inactivityTimeout=setTimeout(function(){!0!==e.newActivity?(e.isUserActive=!1,i=new CustomEvent("userInactive"),t.dispatchEvent(i)):clearTimeout(e.inactivityTimeout)},1e3*e.displayOptions.controlBar.autoHideTimeout)}},300);var i=fluidPlayerClass.isTouchDevice()?"touchstart":"mousemove";t.addEventListener(i,function(){e.newActivity=!0})},hasControlBar:function(){return!(!document.getElementById(this.videoPlayerId+"_fluid_controls_container")||"browser"==this.displayOptions.layout)},hideControlBar:function(){var e=fluidPlayerClass.getInstanceIdByWrapperId(this.getAttribute("id")),t=fluidPlayerClass.getInstanceById(e),i=document.getElementById(e);if(t.hasControlBar()){var n=document.getElementById(t.videoPlayerId+"_fluid_controls_container");t.displayOptions.controlBar.animated?t.fadeOut(n):n.style.display="none"}i.style.cursor="none"},showControlBar:function(){var e=fluidPlayerClass.getInstanceIdByWrapperId(this.getAttribute("id")),t=fluidPlayerClass.getInstanceById(e),i=document.getElementById(e);if(t.hasControlBar()){var n=document.getElementById(t.videoPlayerId+"_fluid_controls_container");t.displayOptions.controlBar.animated?t.fadeIn(n):n.style.display="block"}fluidPlayerClass.isTouchDevice()||(i.style.cursor="default")},fadeOut:function(e){var t=1,i=setInterval(function(){t<=.1&&clearInterval(i),e.style.opacity=t,t-=.1},50)},fadeIn:function(e){var t=.1,i=setInterval(function(){t>=1?clearInterval(i):(e.style.opacity=t,t+=.1)},10)},linkControlBarUserActivity:function(){var e=document.getElementById(this.videoPlayerId);e.addEventListener("userInactive",this.hideControlBar),e.addEventListener("userActive",this.showControlBar)},initMute:function(){!0===this.displayOptions.mute&&(document.getElementById(this.videoPlayerId).volume=0)},init:function(e,t,i){var n=this,o=document.getElementById(e);for(var a in n.vastOptions={vastTagUrl:"",tracking:[],stopTracking:[]},n.videoPlayerId=e,n.originalSrc=n.getCurrentSrc(),n.isCurrentlyPlayingAd=!1,n.isCurrentlyPlayingVideo=!1,n.recentWaiting=!1,n.latestVolume=1,n.currentVideoDuration=0,n.initialStart=!1,n.suppressClickthrough=!1,n.timelinePreviewData=[],n.mainVideoCurrentTime=0,n.mainVideoDuration=0,n.isTimer=!1,n.timer=null,n.timerPool={},n.adList={},n.adPool={},n.availableRolls=["preRoll","midRoll","postRoll"],n.autoplayAfterAd=!0,n.nonLinearDuration=15,n.supportedStaticTypes=["image/gif","image/jpeg","image/png"],n.inactivityTimeout=null,n.isUserActive=null,n.displayOptions={mediaType:"video/mp4",skipButtonCaption:"Skip ad in [seconds]",skipButtonClickCaption:'Skip ad <span class="skip_button_icon"></span>',closeButtonCaption:"Close",layout:"default",templateLocation:fluidPlayerScriptLocation+"templates/",scriptsLocation:fluidPlayerScriptLocation+"scripts/",vastTimeout:5e3,timelinePreview:{},vastLoadedCallback:function(){},noVastVideoCallback:function(){},vastVideoSkippedCallback:function(){},vastVideoEndedCallback:function(){},playerInitCallback:function(){},autoPlay:!1,logo:null,logoPosition:"top left",logoOpacity:1,logoUrl:null,adText:null,adCTAText:null,htmlOnPauseBlock:null,htmlOnPauseBlockWidth:null,htmlOnPauseBlockHeight:null,responsive:!1,adList:{},keyboardControl:!0,controlBar:{autoHide:!1,autoHideTimeout:3,animated:!0},mute:!1},i)if("object"==typeof i[a])for(var r in i[a])n.displayOptions[a][r]=i[a][r];else n.displayOptions[a]=i[a];"/"!==n.displayOptions.templateLocation.slice(-1)&&(n.displayOptions.templateLocation+="/"),"/"!==n.displayOptions.scriptsLocation.slice(-1)&&(n.displayOptions.scriptsLocation+="/"),n.setupPlayerWrapper(),o.addEventListener("webkitfullscreenchange",n.recalculateAdDimensions,!1),o.addEventListener("fullscreenchange",n.recalculateAdDimensions,!1),o.addEventListener("waiting",n.onRecentWaiting,!1),o.addEventListener("pause",n.onFluidPlayerPause,!1),o.addEventListener("loadeddata",n.mainVideoReady,!1),o.addEventListener("durationchange",function(){n.currentVideoDuration=n.getCurrentVideoDuration()},!1),o.addEventListener("error",n.onErrorDetection,!1),n.currentVideoDuration=n.getCurrentVideoDuration(),isNaN(n.currentVideoDuration)&&(n.currentVideoDuration=0),n.setLayout(),n.latestVolume=o.volume,n.handleFullscreen(),n.initLogo(),n.initMute(),n.displayOptions.playerInitCallback(),n.createVideoSourceSwitch(),n.userActivityChecker(),n.setVastList(t),n.displayOptions.autoPlay&&o.play(),n.displayOptions.keyboardControl&&n.keyboardControl(),n.displayOptions.controlBar.autoHide&&n.linkControlBarUserActivity()}};
